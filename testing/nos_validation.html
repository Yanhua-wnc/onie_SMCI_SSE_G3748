
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="../_static/fonts/open-sans/stylesheet.css" />
  <!-- Licensed under the SIL Open Font License -->
  <link rel="stylesheet" type="text/css" href="../_static/fonts/source-serif-pro/source-serif-pro.css" />
  <link rel="stylesheet" type="text/css" href="../_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="../_static/css/bootstrap-theme.min.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>NOS Validation &#8212; Open Network Install Environment  documentation</title>
    <link rel="stylesheet" href="../_static/guzzle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../_static/onie-favicon-16x16.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="For Developers" href="../developers/index.html" />
    <link rel="prev" title="ONIE Compliance Environment" href="oce.html" />
  
   

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../developers/index.html" title="For Developers"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="oce.html" title="ONIE Compliance Environment"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Open Network Install Environment  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Unit Testing</a> &#187;</li> 
      </ul>
    </div>
    <div class="container-wrapper">

      <div id="mobile-toggle">
        <a href="#"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></a>
      </div>
  <div id="left-column">
    <div class="sphinxsidebar">
  <a href="
      ../index.html" class="logo">
  
  <img src="../_static/ONIE-logo-green-160x60.png" class="logo" />
  </a>
  <center><a href="https://github.com/opencomputeproject/onie" class="logo">
  <svg class="octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
  opencomputeproject/onie</a></center>

<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h2>Table Of Contents</h2>
  </div>
  <div class="sidebar-toc">
    
    
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../download/index.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/index.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../news/index.html">News</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-guide/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design-spec/index.html">Design Specification</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Unit Testing</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">Testing Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="oce.html">ONIE Compliance Environment</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">NOS Validation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developers/index.html">For Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli/index.html">Command Line Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">FAQ</a></li>
</ul>

    
  </div>
</div>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h2>Contents</h2>
    <div class="sidebar-localtoc">
      <ul>
<li><a class="reference internal" href="#">NOS Validation</a><ul>
<li><a class="reference internal" href="#testing-environment">Testing Environment</a><ul>
<li><a class="reference internal" href="#recommended-environment-linux">Recommended Environment - Linux</a></li>
<li><a class="reference internal" href="#recommended-environment-windows">Recommended Environment - Windows</a></li>
</ul>
</li>
<li><a class="reference internal" href="#objectives">Objectives</a></li>
<li><a class="reference internal" href="#tests">Tests</a><ul>
<li><a class="reference internal" href="#baseline">Baseline</a></li>
<li><a class="reference internal" href="#nos-install">NOS Install</a></li>
<li><a class="reference internal" href="#nos-uninstall">NOS Uninstall</a></li>
<li><a class="reference internal" href="#demo-os-install">Demo OS Install</a></li>
<li><a class="reference internal" href="#demo-os-uninstall">Demo OS Uninstall</a></li>
<li><a class="reference internal" href="#onie-self-update">ONIE Self Update</a></li>
<li><a class="reference internal" href="#onie-rescue-mode">ONIE Rescue Mode</a></li>
</ul>
</li>
</ul>
</li>
</ul>

    </div>
  </div>
</div>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <div id="main-search">
      <form class="form-inline" action="../search.html" method="GET" role="form">
        <div class="input-group">
          <input name="q" type="text" class="form-control" placeholder="Search...">
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div>
      
    </div>
  </div>
        <div id="right-column">
          
          <div role="navigation" aria-label="breadcrumbs navigation">
            <ol class="breadcrumb">
              <li><a href="../index.html">Home</a></li>
              
                <li><a href="index.html">Unit Testing</a></li>
              
              <li>NOS Validation</li>
            </ol>
          </div>
          
          <div class="document clearer body">
            
  <div class="section" id="nos-validation">
<h1>NOS Validation<a class="headerlink" href="#nos-validation" title="Permalink to this headline">¶</a></h1>
<p>NOS validation refers to the idea that a NOS must cooperate in an
ONIE-enabled system in an appropriate manner.  NOS validation verifies
that a NOS respects the ONIE interface, without corrupting the ONIE
environment for other operating systems.</p>
<div class="section" id="testing-environment">
<h2>Testing Environment<a class="headerlink" href="#testing-environment" title="Permalink to this headline">¶</a></h2>
<p>In order to perform NOS validation against an ONIE device, the following is required:</p>
<ul class="simple">
<li>Demo OS for given platform</li>
<li>ONIE ready NOS (referred to as a NOS Under Test or NUT)</li>
<li>ONIE Certified Device from 2015.05 or later (referred to as Device Under Test or DUT)</li>
<li>HW Vendor provided serial console cable (for device interaction and recording of session)</li>
<li>CAT5/CAT6 RJ45 (for image discovery and delivery)</li>
<li>PC with serial terminal and RJ45 NIC</li>
</ul>
<div class="section" id="recommended-environment-linux">
<h3>Recommended Environment - Linux<a class="headerlink" href="#recommended-environment-linux" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Latest Linux distribution (e.g. Debian) with IPv6 enabled</li>
<li><a class="reference external" href="https://github.com/opencomputeproject/onie/blob/master/contrib/oce/README.md">OCE</a> properly installed and configured<ul>
<li>In particular <a class="reference external" href="https://github.com/opencomputeproject/onie/blob/master/contrib/oce/README.md#testing-onie">test-onie.py</a> and <a class="reference external" href="https://github.com/opencomputeproject/onie/blob/master/contrib/oce/README.md#testing-a-nos">test-nos.sh</a></li>
</ul>
</li>
<li><code class="docutils literal notranslate"><span class="pre">screen(1)</span></code> or <code class="docutils literal notranslate"><span class="pre">minicom(1)</span></code><ul>
<li>115200 baud 8N1, no flow control (unless otherwise specified by DUT)</li>
<li>Logging enabled</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="recommended-environment-windows">
<h3>Recommended Environment - Windows<a class="headerlink" href="#recommended-environment-windows" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Latest Windows 8.1 Update with patches</li>
<li>PuTTY or Tera Term<ul>
<li>115200 baud 8N1, no flow control (unless otherwise specified by DUT)</li>
<li>Logging enabled</li>
</ul>
</li>
<li><a class="reference external" href="https://github.com/opencomputeproject/onie/blob/master/contrib/oce/README.md">OCE</a> properly installed and configured<ul>
<li>In particular <a class="reference external" href="https://github.com/opencomputeproject/onie/blob/master/contrib/oce/README.md#testing-onie">test-onie.py</a> and <a class="reference external" href="https://github.com/opencomputeproject/onie/blob/master/contrib/oce/README.md#testing-a-nos">test-nos.sh</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="objectives">
<h2>Objectives<a class="headerlink" href="#objectives" title="Permalink to this headline">¶</a></h2>
<p>This program is to ensure a NUT on a given DUT adheres to the software
contract provided by ONIE to the NOS.  In short, the NOS <em>shall</em> obey
the contract which includes:</p>
<ul class="simple">
<li>No Modification to ONIE (files, partition layout, etc…)</li>
<li>The ability for a user to uninstall a NOS and install another NOS</li>
<li>The ability for a user to update ONIE after a NOS has been installed</li>
<li>The ability for a user to enter ONIE’s rescue mode after a NOS has been installed</li>
<li>The ability for a user to install and uninstall a NOS and update ONIE when a Diagnostic Image is present on a DUT</li>
</ul>
</div>
<div class="section" id="tests">
<h2>Tests<a class="headerlink" href="#tests" title="Permalink to this headline">¶</a></h2>
<div class="section" id="baseline">
<h3>Baseline<a class="headerlink" href="#baseline" title="Permalink to this headline">¶</a></h3>
<p>Starting with a DUT with no NOS installed, record the state of the DUT
using <code class="docutils literal notranslate"><span class="pre">test-nos.sh</span> <span class="pre">-c</span> <span class="pre">init</span></code>.  The output of the script will indicate
if a Diagnostic NOS (DIAG) is present on the DUT.  This information
will need to tracked throughout the rest of the tests to ensure the
DIAG is present and able to be invoked by the user.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">PASS Criteria: ONIE state successfully recorded. Test 0.</p>
</div>
</div>
<div class="section" id="nos-install">
<h3>NOS Install<a class="headerlink" href="#nos-install" title="Permalink to this headline">¶</a></h3>
<p>From the baseline DUT, install the NUT using OCE.  Once the
installation is complete, boot into ONIE rescue mode via <code class="docutils literal notranslate"><span class="pre">GRUB</span></code> for
x86_64 or <code class="docutils literal notranslate"><span class="pre">U-boot</span></code> on others.  In ONIE, perform <code class="docutils literal notranslate"><span class="pre">test-nos.sh</span> <span class="pre">-c</span>
<span class="pre">check</span></code>.  Ensure no changes to ONIE have occurred (outside of
additional GRUB entries for NUT).</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">PASS Criteria: NUT installation does not alter ONIE. Test 1.</p>
</div>
</div>
<div class="section" id="nos-uninstall">
<h3>NOS Uninstall<a class="headerlink" href="#nos-uninstall" title="Permalink to this headline">¶</a></h3>
<p>From the DUT with the installed NUT, perform an ONIE uninstall from the following areas:</p>
<ul class="simple">
<li>From within the NUT (<strong>Test 2</strong>)</li>
<li>From within ONIE rescue (<strong>Test 3</strong>)</li>
<li>From <code class="docutils literal notranslate"><span class="pre">GRUB</span></code> ONIE Uninstall target or <code class="docutils literal notranslate"><span class="pre">run</span> <span class="pre">onie_uninstall</span></code> from <code class="docutils literal notranslate"><span class="pre">U-boot</span></code> (<strong>Test 4</strong>)</li>
</ul>
<p>At the end of all of those uninstall targets, ensure <code class="docutils literal notranslate"><span class="pre">test-nos.sh</span> <span class="pre">-c</span> <span class="pre">check</span></code>
results in no changes.  E.g. ONIE is back into the baseline state.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">PASS Criteria: NUT uninstallation does not alter ONIE. Tests 2 - 4.</p>
</div>
</div>
<div class="section" id="demo-os-install">
<h3>Demo OS Install<a class="headerlink" href="#demo-os-install" title="Permalink to this headline">¶</a></h3>
<p>From the baseline DUT, install the Demo OS using OCE.  Once the
installation is complete, boot into ONIE rescue mode via <code class="docutils literal notranslate"><span class="pre">GRUB</span></code> for
x86_64 or <code class="docutils literal notranslate"><span class="pre">U-Boot</span></code> on others.  In ONIE, perform <code class="docutils literal notranslate"><span class="pre">test-nos.sh</span> <span class="pre">-c</span>
<span class="pre">check</span></code>.  Ensure no changes to ONIE have occurred (outside of
additional GRUB entries for Demo OS).</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">PASS Criteria: Demo OS installation does not alter ONIE. Test 5.</p>
</div>
</div>
<div class="section" id="demo-os-uninstall">
<h3>Demo OS Uninstall<a class="headerlink" href="#demo-os-uninstall" title="Permalink to this headline">¶</a></h3>
<p>From the DUT with the installed Demo OS, perform an ONIE uninstall from the following areas:</p>
<ul class="simple">
<li>From within the Demo OS (<strong>Test 6</strong>)</li>
<li>From within ONIE rescue (<strong>Test 7</strong>)</li>
<li>From <code class="docutils literal notranslate"><span class="pre">GRUB</span></code> ONIE Uninstall target or <code class="docutils literal notranslate"><span class="pre">run</span> <span class="pre">onie_uninstall</span></code> from <code class="docutils literal notranslate"><span class="pre">U-boot</span></code> (<strong>Test 8</strong>)</li>
</ul>
<p>At the end of all of those uninstall targets, ensure <code class="docutils literal notranslate"><span class="pre">test-nos.sh</span> <span class="pre">-c</span>
<span class="pre">check</span></code> results in no changes.  E.g. ONIE is back into the baseline
state.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">PASS Criteria: Demo OS uninstallation does not alter ONIE. Tests 6 - 8.</p>
</div>
</div>
<div class="section" id="onie-self-update">
<h3>ONIE Self Update<a class="headerlink" href="#onie-self-update" title="Permalink to this headline">¶</a></h3>
<p>From the DUT with the installed NUT, perform an ONIE Self Update from the following areas using OCE:</p>
<ul class="simple">
<li>From within the NUT (<strong>Test 9</strong>)</li>
<li>From within ONIE rescue (<strong>Test 10</strong>)</li>
<li>From <code class="docutils literal notranslate"><span class="pre">GRUB</span></code> ONIE Update target or <code class="docutils literal notranslate"><span class="pre">run</span> <span class="pre">onie_update</span></code> from <code class="docutils literal notranslate"><span class="pre">U-boot</span></code> (<strong>Test 11</strong>)</li>
</ul>
<p>At the end of all of those update targets, perform <code class="docutils literal notranslate"><span class="pre">test-nos.sh</span> <span class="pre">-c</span>
<span class="pre">init</span></code> as ONIE files are modified. Record the state of the DUT.  This
is the new baseline state.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">PASS Criteria: ONIE is able to perform update with the NOS fully functional. Tests 9 - 11.</p>
</div>
</div>
<div class="section" id="onie-rescue-mode">
<h3>ONIE Rescue Mode<a class="headerlink" href="#onie-rescue-mode" title="Permalink to this headline">¶</a></h3>
<p>From the DUT with the installed NUT, perform an ONIE Rescue from the following areas:</p>
<ul class="simple">
<li>From within the NUT (<strong>Test 12</strong>)</li>
<li>From <code class="docutils literal notranslate"><span class="pre">GRUB</span></code> ONIE Rescue target or <code class="docutils literal notranslate"><span class="pre">run</span> <span class="pre">onie_rescue</span></code> from <code class="docutils literal notranslate"><span class="pre">U-boot</span></code> (<strong>Test 13</strong>)</li>
</ul>
<p>At the end of all of those rescue targets, ensure <code class="docutils literal notranslate"><span class="pre">test-nos.sh</span> <span class="pre">-c</span>
<span class="pre">check</span></code> results in no changes.  E.g. ONIE is back into the baseline
state.  If a DIAG was present on the box for the Baseline, ensure the
DIAG is still present on the DUT and is able to be invoked by the
user.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">PASS Criteria: ONIE is able to perform update with the NOS fully functional. Tests 12 and 13.</p>
</div>
</div>
</div>
</div>


          </div>
            
  <div class="footer-relations">
    
      <div class="pull-left">
        <a class="btn btn-default" href="oce.html" title="previous chapter (use the left arrow)">ONIE Compliance Environment</a>
      </div>
    
      <div class="pull-right">
        <a class="btn btn-default" href="../developers/index.html" title="next chapter (use the right arrow)">For Developers</a>
      </div>
    </div>
    <div class="clearer"></div>
  
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../developers/index.html" title="For Developers"
             >next</a> |</li>
        <li class="right" >
          <a href="oce.html" title="ONIE Compliance Environment"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Open Network Install Environment  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Unit Testing</a> &#187;</li> 
      </ul>
    </div>
<script type="text/javascript">
  $("#mobile-toggle a").click(function () {
    $("#left-column").toggle();
  });
</script>
<script type="text/javascript" src="../_static/js/bootstrap.js"></script>
  <div class="footer">
        &copy; Copyright 2013-2018, <a href="https://cumulusnetworks.com/">Cumulus Networks, Inc.</a>  All Rights Reserved.
  </div>
  </body>
</html>