
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="../_static/fonts/open-sans/stylesheet.css" />
  <!-- Licensed under the SIL Open Font License -->
  <link rel="stylesheet" type="text/css" href="../_static/fonts/source-serif-pro/source-serif-pro.css" />
  <link rel="stylesheet" type="text/css" href="../_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="../_static/css/bootstrap-theme.min.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>Overview &#8212; Open Network Install Environment  documentation</title>
    <link rel="stylesheet" href="../_static/guzzle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../_static/onie-favicon-16x16.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Download the Code" href="../download/index.html" />
    <link rel="prev" title="Open Network Install Environment" href="../index.html" />
  
   

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../download/index.html" title="Download the Code"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../index.html" title="Open Network Install Environment"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Open Network Install Environment  documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="container-wrapper">

      <div id="mobile-toggle">
        <a href="#"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></a>
      </div>
  <div id="left-column">
    <div class="sphinxsidebar">
  <a href="
      ../index.html" class="logo">
  
  <img src="../_static/ONIE-logo-green-160x60.png" class="logo" />
  </a>
  <center><a href="https://github.com/opencomputeproject/onie" class="logo">
  <svg class="octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
  opencomputeproject/onie</a></center>

<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h2>Table Of Contents</h2>
  </div>
  <div class="sidebar-toc">
    
    
      <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#project-overview">Project Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#design-overview">Design Overview</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../download/index.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/index.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../news/index.html">News</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-guide/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design-spec/index.html">Design Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/index.html">Unit Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/index.html">For Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli/index.html">Command Line Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">FAQ</a></li>
</ul>

    
  </div>
</div>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h2>Contents</h2>
    <div class="sidebar-localtoc">
      <ul>
<li><a class="reference internal" href="#">Overview</a><ul>
<li><a class="reference internal" href="#project-overview">Project Overview</a></li>
<li><a class="reference internal" href="#design-overview">Design Overview</a><ul>
<li><a class="reference internal" href="#initial-system-boot">Initial System Boot</a></li>
<li><a class="reference internal" href="#subsequent-system-boots">Subsequent System Boots</a></li>
<li><a class="reference internal" href="#locating-an-installer-image">Locating an Installer Image</a></li>
<li><a class="reference internal" href="#installer-execution-environment">Installer Execution Environment</a></li>
<li><a class="reference internal" href="#installer-overview">Installer Overview</a></li>
<li><a class="reference internal" href="#network-operating-system-interface">Network Operating System Interface</a></li>
<li><a class="reference internal" href="#updating-onie">Updating ONIE</a></li>
<li><a class="reference internal" href="#firmware-updates">Firmware Updates</a></li>
</ul>
</li>
</ul>
</li>
</ul>

    </div>
  </div>
</div>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <div id="main-search">
      <form class="form-inline" action="../search.html" method="GET" role="form">
        <div class="input-group">
          <input name="q" type="text" class="form-control" placeholder="Search...">
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div>
      
    </div>
  </div>
        <div id="right-column">
          
          <div role="navigation" aria-label="breadcrumbs navigation">
            <ol class="breadcrumb">
              <li><a href="../index.html">Home</a></li>
              
              <li>Overview</li>
            </ol>
          </div>
          
          <div class="document clearer body">
            
  <div class="section" id="overview">
<span id="onie-overview"></span><h1>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h1>
<div class="section" id="project-overview">
<h2>Project Overview<a class="headerlink" href="#project-overview" title="Permalink to this headline">¶</a></h2>
<p>The Open Network Install Environment (ONIE) is an open source
initiative that defines an open “install environment” for modern
networking hardware.  ONIE enables an open networking hardware
ecosystem where end users have a choice among different network
operating systems.</p>
<p>Before the advent of ONIE, Ethernet switches were procured with
pre-installed, captive operating systems, effectively creating
networking appliances that locked end users into a vertical supply
chain.</p>
<p>Initially, ONIE enabled the “white box” and “bare metal” network
switching ecosystem by opening up the hardware to multiple operating
system vendors.  Over time ONIE’s popularity grew, to where now ONIE
is the de facto install environment across the networking hardware
industry.</p>
<p>Modern network switches have a management subsystem, based on a
variety of CPU architectures that typically include serial console,
out-of-band Ethernet and mass storage.  This subsystem can function
independently from the switching ASIC(s) associated with the “front
panel” Ethernet interfaces.</p>
<p>ONIE defines an open source “install environment” that runs on this
management subsystem utilizing facilities in a Linux kernel and
BusyBox environment. This environment allows end users and channel
partners to install the target NOS as part of data center
provisioning, in the fashion that servers are provisioned.</p>
<p>ONIE enables switch hardware suppliers, distributors and resellers to
manage their operations based on a small number of hardware SKUs.
This in turn creates economies of scale in manufacturing,
distribution, stocking, and RMA enabling a thriving ecosystem of both
network hardware and operating system alternatives.</p>
<p><strong>Highlights:</strong></p>
<ul class="simple">
<li>Combines a boot loader with a modern Linux kernel and BusyBox</li>
<li>Provides an environment for installing any NOS</li>
<li>Disruptive; liberating users from a captive, pre-installed NOS</li>
<li>Helps automate large scale data center switch provisioning</li>
<li>Enables you to manage your switches like you manage your Linux servers</li>
</ul>
</div>
<div class="section" id="design-overview">
<h2>Design Overview<a class="headerlink" href="#design-overview" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For the complete design, see the <a class="reference internal" href="../design-spec/index.html#full-design-spec"><span class="std std-ref">Design Specification</span></a>.</p>
</div>
<p>ONIE is the combination of a boot loader and a small operating system
for network switches that provides an environment for automated
provisioning.  ONIE utilizes the CPU complex of the switch, but not
the forwarding data plane as shown in the following figure:</p>
<div class="figure align-center" id="id1">
<a class="reference internal image-reference" href="../_images/CPU_Complex.png"><img alt="Typical Network Switch CPU Complex" src="../_images/CPU_Complex.png" style="width: 784.08px; height: 570.24px;" /></a>
<p class="caption"><span class="caption-text">Typical Network Switch CPU Complex – ONIE uses the elements highlighted on the left</span></p>
</div>
<div class="section" id="initial-system-boot">
<h3>Initial System Boot<a class="headerlink" href="#initial-system-boot" title="Permalink to this headline">¶</a></h3>
<p>When a new machine boots for the first time, ONIE locates and executes
an NOS vendor’s installation program, as shown here:</p>
<div class="figure align-center" id="id2">
<a class="reference internal image-reference" href="../_images/First_Boot.png"><img alt="First Time Boot Up" src="../_images/First_Boot.png" style="width: 766.5px; height: 450.5px;" /></a>
<p class="caption"><span class="caption-text">Execution Flow – First Time Boot Up</span></p>
</div>
</div>
<div class="section" id="subsequent-system-boots">
<h3>Subsequent System Boots<a class="headerlink" href="#subsequent-system-boots" title="Permalink to this headline">¶</a></h3>
<p>ONIE is <strong>not</strong> used on every boot of the system.  After the initial
installation, subsequent boots go straight into the NOS,
bypassing ONIE.  This is depicted here:</p>
<div class="figure align-center" id="id3">
<a class="reference internal image-reference" href="../_images/Second_Boot.png"><img alt="Subsequent System Boots" src="../_images/Second_Boot.png" style="width: 705.0px; height: 409.0px;" /></a>
<p class="caption"><span class="caption-text">Subsequent Boots – After the NOS Is Installed</span></p>
</div>
<p>Mechanisms exist for a system to re-enter the installation phase.  An
API is defined so that network operating systems can direct the system
to re-enter the installation phase.</p>
</div>
<div class="section" id="locating-an-installer-image">
<h3>Locating an Installer Image<a class="headerlink" href="#locating-an-installer-image" title="Permalink to this headline">¶</a></h3>
<p>ONIE uses a number of methods to locate the NOS installer,
including, but not limited to:</p>
<ul class="simple">
<li>Statically configured from the boot loader</li>
<li>Locally attached storage, for example a USB memory stick</li>
<li>DHCPv4 / DHCPv6</li>
<li>IPv4 / IPv6 link local neighbors</li>
<li>mDNS / DNS-SD</li>
<li>PXE-like TFTP and HTTP waterfalls</li>
</ul>
<p>The preferred method for image download is HTTP as it offers robust
performance for large image sizes.  TFTP is also supported, but its
use is discouraged in favor of HTTP.</p>
<p>Once an image is located, ONIE proceeds to execute the NOS installer.</p>
<p>The following diagram illustrates an example of the location and
execution steps:</p>
<div class="figure align-center" id="id4">
<a class="reference internal image-reference" href="../_images/Discovery.png"><img alt="Image Discovery" src="../_images/Discovery.png" style="width: 546.0px; height: 408.0px;" /></a>
<p class="caption"><span class="caption-text">Image Discovery Methods</span></p>
</div>
<p>In the previous diagram the “Less Exact Methods” box refers to
mechanisms that use probing techniques to locate an image, such as:</p>
<ul class="simple">
<li>IPv4 / IPv6 link local neighbors</li>
<li>PXE-like TFTP and HTTP waterfalls</li>
</ul>
</div>
<div class="section" id="installer-execution-environment">
<h3>Installer Execution Environment<a class="headerlink" href="#installer-execution-environment" title="Permalink to this headline">¶</a></h3>
<p>When executing the installer, ONIE exports a number of environment
variables for the installer to use.  These variables include system
identification information as well as information learned during the
image discovery process.</p>
<p>An example of the information exported to the installer includes:</p>
<ul class="simple">
<li>Installer URL</li>
<li>HW vendor identifier</li>
<li>HW platform identifier</li>
<li>HW serial number</li>
<li>Ethernet management MAC address</li>
<li>IP address (from DHCP)</li>
<li>Hostname (from DHCP)</li>
</ul>
<p>These variables allow an installer to integrate with other process
automation and orchestration, immediately tying together product
serial numbers, MAC addresses and NOS versions.</p>
</div>
<div class="section" id="installer-overview">
<h3>Installer Overview<a class="headerlink" href="#installer-overview" title="Permalink to this headline">¶</a></h3>
<p>The installer’s responsibility is to persistently install the operating
system into the hardware.  In fulfilling that role an ONIE-compliant
NOS installer has a lot of flexibility.</p>
<p>Some examples of what an installer could do:</p>
<ul class="simple">
<li>Fetch additional binaries and configuration files via HTTP</li>
<li>Chat with inventory control systems via HTTP</li>
<li>Download a new kernel+initramfs and <code class="docutils literal notranslate"><span class="pre">kexec(8)</span></code> into it</li>
</ul>
</div>
<div class="section" id="network-operating-system-interface">
<h3>Network Operating System Interface<a class="headerlink" href="#network-operating-system-interface" title="Permalink to this headline">¶</a></h3>
<p>ONIE provides an environment for the NOS to perform system
provisioning and maintenance operations, including:</p>
<ul class="simple">
<li>Reinstalling a different NOS</li>
<li>Uninstalling/wiping the system clean</li>
<li>Rescue and recovery</li>
<li>Updating ONIE</li>
<li>Updating the machine CPLD/FPGAs and BIOS firmware</li>
</ul>
<p>This environment forms an interface between ONIE and the NOS.</p>
</div>
<div class="section" id="updating-onie">
<h3>Updating ONIE<a class="headerlink" href="#updating-onie" title="Permalink to this headline">¶</a></h3>
<p>ONIE provides a mechanism for updating itself.  This mechanism
proceeds much like the network installer discovery and executing
phase, but the image in this case is an ONIE update image.  Once
located, the ONIE update image is downloaded and executed.</p>
</div>
<div class="section" id="firmware-updates">
<h3>Firmware Updates<a class="headerlink" href="#firmware-updates" title="Permalink to this headline">¶</a></h3>
<p>ONIE provides a mechanism for updating the firmware of the machine.
In this context, firmware refers to software like CPLD/FPGA code and
BIOS firmware.  This mechanism proceeds much like updating ONIE
itself, except the image in this case is ONIE firmware update image.
Once located, the ONIE update image is downloaded and executed.</p>
</div>
</div>
</div>


          </div>
            
  <div class="footer-relations">
    
      <div class="pull-left">
        <a class="btn btn-default" href="../index.html" title="previous chapter (use the left arrow)">Open Network Install Environment</a>
      </div>
    
      <div class="pull-right">
        <a class="btn btn-default" href="../download/index.html" title="next chapter (use the right arrow)">Download the Code</a>
      </div>
    </div>
    <div class="clearer"></div>
  
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../download/index.html" title="Download the Code"
             >next</a> |</li>
        <li class="right" >
          <a href="../index.html" title="Open Network Install Environment"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Open Network Install Environment  documentation</a> &#187;</li> 
      </ul>
    </div>
<script type="text/javascript">
  $("#mobile-toggle a").click(function () {
    $("#left-column").toggle();
  });
</script>
<script type="text/javascript" src="../_static/js/bootstrap.js"></script>
  <div class="footer">
        &copy; Copyright 2013-2018, <a href="https://cumulusnetworks.com/">Cumulus Networks, Inc.</a>  All Rights Reserved.
  </div>
  </body>
</html>